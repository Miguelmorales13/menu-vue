(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[11],{c243:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"Users"}},[s("Delete",{attrs:{headers:e.headers,item:e.usersStore.selectedUser},on:{onConfirm:e.onConfirmDelete},model:{value:e.dialogDelete,callback:function(t){e.dialogDelete=t},expression:"dialogDelete"}}),s("Table",{attrs:{headers:e.headers,loading:e.usersStore.loader,data:e.usersStore.usersTable,title:"titles.users",hasAccessToWrite:"2"==e.authStore.accessUsers},scopedSlots:e._u([{key:"normal",fn:function(t){var o=t.item;return[s("q-btn",{attrs:{icon:"edit",size:"sm",dense:"",color:"warning"},on:{click:function(t){return e.onUpdate(o)}}}),e._v("Â \n\t\t\t\t\t"),s("q-btn",{attrs:{icon:"delete",size:"sm",dense:"",color:"red"},on:{click:function(t){return e.onDelete(o)}}})]}},{key:"card",fn:function(t){var o=t.item;return[s("q-btn",{staticClass:"q-my-xs",attrs:{size:"sm",dense:"",color:"warning"},on:{click:function(t){return e.onUpdate(o)}}},[s("q-icon",{attrs:{name:"edit"}}),e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(e.$t("tables.edit"))+"\n\t\t\t\t\t\t\t\t\t\t\t")],1),s("q-btn",{staticClass:"q-my-xs",attrs:{size:"sm",dense:"",color:"red"},on:{click:function(t){return e.onDelete(o)}}},[s("q-icon",{attrs:{name:"delete"}}),e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(e.$t("tables.delete"))+"\n\t\t\t\t\t\t\t\t\t\t\t")],1)]}}])},[s("FormUsers",{model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}})],1)],1)},r=[],n=s("60a3"),l=s("0748"),i=s("139f"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("Modal",{attrs:{btnTitle:"",title:e.user.id?"titles.updated":"titles.creation",loader:e.usersStore.loader,hasBtn:"2"==e.authStore.accessUsers,btnProps:{dense:!0,fab:!0,color:"primary",icon:"add"}},on:{onConfirm:e.onSubmit,onCancel:e.onCancel},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[s("FormFlex",{attrs:{fields:e.fields,loader:e.usersStore.loader,model:e.user},on:{onValidation:function(t){e.formValid=t},onSubmit:e.onSubmit}})],1)},c=[],u=s("0365"),d=s("714b"),h=s("6fc5"),m=s("02f2"),f=s("68d2"),p=s("f8de"),b=s("aca1"),g=function(e,t,s,o){var r,n=arguments.length,l=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,s,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(n<3?r(l):n>3?r(t,s,l):r(t,s))||l);return n>3&&l&&Object.defineProperty(t,s,l),l},y=function(e,t,s,o){function r(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,n){function l(e){try{a(o.next(e))}catch(t){n(t)}}function i(e){try{a(o["throw"](e))}catch(t){n(t)}}function a(e){e.done?s(e.value):r(e.value).then(l,i)}a((o=o.apply(e,t||[])).next())}))};let v=class extends n["d"]{constructor(){super(...arguments),this.dialog=!1,this.formValid=!1,this.usersStore=Object(h["e"])(b["a"],this.$store),this.rolesState=Object(h["e"])(f["a"],this.$store),this.authStore=Object(h["e"])(p["a"],this.$store),this.user={},this.fields=[]}onCancel(){return y(this,void 0,void 0,(function*(){return this.dialog=!1,!1}))}onChange(e,t){this.dialog=e}mounted(){return y(this,void 0,void 0,(function*(){this.dialog=this.value,this.user=Object.assign({},this.usersStore.selectedUser)}))}onSelectedUser(e,t){this.user=Object.assign({},e)}onSubmit(){return y(this,void 0,void 0,(function*(){if(this.formValid)if(this.user.id){yield this.usersStore.update(Object.assign({},this.user));this.onCancel()}else{yield this.usersStore.create(Object.assign({},this.user));this.onCancel()}}))}created(){return y(this,void 0,void 0,(function*(){yield this.rolesState.getAll(),this.generateOptions(this.rolesState.roles)}))}generateOptions(e){console.log(e),this.fields=[{type:"text",label:"forms.users.name",key:"name",field:{class:"col-12 col-sm-6 q-px-sm q-py-sm"},props:{},rules:[...m["a"].reqAndTree]},{type:"text",label:"forms.users.last_name",key:"lastName",field:{class:"col-12 col-sm-6 q-px-sm q-py-sm"},rules:[...m["a"].reqAndTree],props:{}},{type:"text",label:"forms.users.email",key:"email",field:{class:"col-12 col-sm-6 q-px-sm q-py-sm"},rules:[],props:{type:"email"}},{type:"select",label:"forms.users.rol",key:"rolId",keyLabel:"id",nameLabel:"name",options:e,field:{class:"col-12 col-sm-6 q-px-sm q-py-sm"},rules:[],props:{}},{type:"toggle",label:"forms.users.active",key:"active",field:{class:"col-12 col-sm-6 q-px-sm q-py-sm"},props:{}}]}};g([Object(n["c"])({type:Boolean,required:!0})],v.prototype,"value",void 0),g([Object(n["b"])("input")],v.prototype,"onCancel",null),g([Object(n["e"])("value")],v.prototype,"onChange",null),g([Object(n["e"])("usersStore.selectedUser")],v.prototype,"onSelectedUser",null),v=g([Object(n["a"])({components:{FormFlex:u["a"],Modal:d["a"]}})],v);var S=v,x=S,O=s("2877"),q=Object(O["a"])(x,a,c,!1,null,null,null),j=q.exports,D=s("04ec"),k=function(e,t,s,o){var r,n=arguments.length,l=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(e,t,s,o);else for(var i=e.length-1;i>=0;i--)(r=e[i])&&(l=(n<3?r(l):n>3?r(t,s,l):r(t,s))||l);return n>3&&l&&Object.defineProperty(t,s,l),l},w=function(e,t,s,o){function r(e){return e instanceof s?e:new s((function(t){t(e)}))}return new(s||(s=Promise))((function(s,n){function l(e){try{a(o.next(e))}catch(t){n(t)}}function i(e){try{a(o["throw"](e))}catch(t){n(t)}}function a(e){e.done?s(e.value):r(e.value).then(l,i)}a((o=o.apply(e,t||[])).next())}))};let C=class extends n["d"]{constructor(){super(...arguments),this.usersStore=Object(h["e"])(b["a"],this.$store),this.authStore=Object(h["e"])(p["a"],this.$store),this.dialog=!1,this.dialogDelete=!1,this.dialogPhoto=!1,this.model={},this.headers=[{name:"id",label:"headers.users.no",sortable:!0,required:!0,align:"center",field:"id"},{name:"name",label:"headers.users.name",sortable:!0,required:!0,align:"center",field:"name"},{name:"last_name",label:"headers.users.last_name",sortable:!0,required:!0,align:"center",field:"lastName"},{name:"email",label:"headers.users.email",sortable:!0,required:!0,align:"center",field:"email"},{name:"active",label:"headers.users.status",sortable:!0,required:!0,align:"center",field:"active"},{name:"rol",label:"headers.users.rol",sortable:!0,required:!0,align:"center",field:"rol"},{name:"options",label:"headers.users.options",sortable:!1,required:!1,align:"center",field:"options"}]}getReports(){Object(D["b"])(this.usersStore.excel,"usuarios")}onUpdate(e){this.usersStore.context.commit("SET",e),this.dialog=!0}onPhoto(e){this.usersStore.context.commit("SET",e),this.dialogPhoto=!0}onDelete(e){this.dialogDelete=!0,this.usersStore.context.commit("SET",e)}onDialogDelete(e,t){e||this.usersStore.context.commit("SET")}onDialogPhoto(e,t){console.log(e),e||this.usersStore.context.commit("SET")}onDialog(e,t){e||this.usersStore.context.commit("SET")}onConfirmDelete(){return w(this,void 0,void 0,(function*(){yield this.usersStore.delete(this.usersStore.selectedUser),this.dialogDelete=!1}))}created(){return w(this,void 0,void 0,(function*(){yield this.usersStore.getAll()}))}};k([Object(n["e"])("dialogDelete")],C.prototype,"onDialogDelete",null),k([Object(n["e"])("dialogPhoto")],C.prototype,"onDialogPhoto",null),k([Object(n["e"])("dialog")],C.prototype,"onDialog",null),C=k([Object(n["a"])({components:{Table:l["a"],FormUsers:j,Delete:i["a"]}})],C);var U=C,P=U,T=s("9c40"),_=s("0016"),$=s("eebe"),E=s.n($),R=Object(O["a"])(P,o,r,!1,null,null,null);t["default"]=R.exports;E()(R,"components",{QBtn:T["a"],QIcon:_["a"]})}}]);